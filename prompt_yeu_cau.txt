# PROJECT SPECIFICATION: FLUTTER STREAMING APP (GETX)

## 1. ROLE & OBJECTIVE
Act as a Senior Flutter Developer. Your task is to build a high-quality Video Streaming Application using the **Flutter** framework and **GetX** for state management.
Refactor the UI and Logic based on the specific requirements below, focusing on a dark-themed, cinematic experience.

## 2. TECH STACK
- **Framework:** Flutter (Latest Stable).
- **State Management:** GetX (Reactive State Manager).
- **Navigation:** GetX Named Routes.
- **Video Player:** `video_player` + `chewie` (or custom UI).
- **Local Storage:** `hive` or `shared_preferences` (for Watchlist & Resume positions).
- **Icons:** CupertinoIcons or MaterialIcons.

## 3. GLOBAL THEME
- **Background:** Pure Black (#000000).
- **Text:** White (#FFFFFF).
- **Accent Color:** Teal/Green (for checkmarks/active states) or Red (for delete actions).
- **Font:** Modern Sans-serif (e.g., Roboto or Poppins).

---

## 4. DETAILED SCREEN REQUIREMENTS

### A. MAIN NAVIGATION (Bottom Bar)
- Implement a `Scaffold` with a Custom Bottom Navigation Bar.
- **Tabs (3 items):**
  1. **Discover** (Icon: Home/Play).
  2. **Downloads** (Icon: Download) -> *Note: This replaces the old Search tab location.*
  3. **Settings** (Icon: Gear/Menu).
- **Logic:** Use `IndexedStack` to preserve the state of pages when switching tabs.

### B. SCREEN 1: DISCOVER (HOME)
**Layout Structure:**
- Use a `Stack` widget to handle the header.
- **Layer 1 (Bottom):** A `SingleChildScrollView` containing the content (Movie Banner, Movie Lists).
- **Layer 2 (Top - Sticky Header):**
  - **App Name ("ANGEL"):** Positioned at the **Top-Left**. It must remain **fixed/sticky** overlaid on top of the content even when the user scrolls down.
  - **Notification Icon:** REMOVE the notification bell icon from the Top-Right. Keep it clean.

**Hero Banner Logic:**
- Display a large movie poster/thumbnail.
- **Primary Button:**
  - **Logic:** Check the watch history for the specific movie.
  - **Case 1 (New User):** Display text **"Watch Now"**.
  - **Case 2 (Returning User):** If `lastPosition > 0` (user watched partially), display text **"Resume"**.
- **Secondary Button:** "Watchlist" (Add to list).

### C. SCREEN 2: VIDEO PLAYER & DETAILS
**Trigger:** Opens immediately when user clicks "Watch Now" or "Resume" on Home Screen.

**Player UI:**
- Standard video player controls (Play/Pause, Seek +/- 10s, Timeline).
- Support for Subtitles (CC) and Cast.

**Info Section (Below Player):**
- **Title:** Movie/Episode Title (e.g., "Episode 2: The Fishermen").
- **Description:** Display only the **Sub-description** (plot summary).
  - **CRITICAL UI CHANGE:** Hide/Remove all legal text, credits, or "Testament" sections found in legacy designs. Keep it clean.
- **Action Buttons (Row):**
  1. **Download:** Toggle icon. Text changes from "Download" -> "Downloading" -> "Downloaded".
  2. **Share:** Standard share sheet.
  3. **Watchlist:** Toggle Add/Remove.

**"Up Next" Section:**
- A vertical list of related episodes/movies below the info section.

### D. SCREEN 3: DOWNLOADS MANAGER (Tab 2)
**UI States:**
1. **View Mode (Default):**
   - List of downloaded episodes.
   - **Header:** Title "Downloads" (Left) + Text Button **"Edit"** (Right).

2. **Edit Mode (Triggered by clicking "Edit"):**
   - **Header changes to:** "Unselect All" (Left) + "Cancel" (Right).
   - **List Items:** Show a **Checkbox** on the left side of each movie thumbnail.
   - **Bottom Action Bar:** A floating or fixed bottom bar appears with a button: **"Delete [X] Selected"**.

**Logic:**
- User selects items -> Click "Delete [X] Selected".
- **Action:** Delete files from local storage AND remove item from the UI list immediately (Real-time update).
- Return to "View Mode" after deletion.

### E. SCREEN 4: WATCHLIST (My List)
- **Access:** Accessible via a "My List" button on the Browse/Search screen or Home.
- **Layout:** Grid or List view of movies user added to Watchlist.
- **Browse Screen Modifications:**
  - On the Browse/Search screen, **REMOVE** "Tickets" and "Settings" buttons.
  - **ADD** a "Watchlist" or "My List" button in that header area.

---

## 5. LOGIC & DATA FLOW (Pseudocode Guidelines)

**Movie Model:**
```dart
class Movie {
  String id;
  String title;
  String videoUrl;
  Duration lastPosition; // For Resume logic
  bool isDownloaded;
  bool inWatchlist;
}
Download Controller Logic (GetX):

Dart
var isEditMode = false.obs;
var selectedIds = <String>[].obs;

void toggleEdit() => isEditMode.value = !isEditMode.value;

void deleteSelected() {
  // 1. Delete physical files
  // 2. Remove from 'downloadedMovies' list
  // 3. Update UI
  downloadedMovies.removeWhere((m) => selectedIds.contains(m.id));
  toggleEdit(); // Exit edit mode
}
6. DELIVERABLES
Please generate the full Flutter code structure, specifically:

pubspec.yaml (dependencies).

main.dart (Entry point & Theme).

main_nav_binding.dart & main_nav_view.dart (Bottom Tabs).

home_view.dart (Sticky Header + Resume Logic).

downloads_view.dart (Edit/Delete Logic).

player_view.dart (Clean UI).